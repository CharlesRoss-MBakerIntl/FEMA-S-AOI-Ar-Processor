(()=>{"use strict";function t(){new class{constructor(){if(this.rgbBoxShadow="",this.shadowboxOpacity="0.60",this.locNavNode=document.querySelector("#second-nav"),this.localNavArr=[].slice.call(document.querySelectorAll(".local-navigation")),this.codeLang="",this.currentURL=this.removePathExt(window.location.pathname),this.designThemeColor="0079c1",this.newNavObj={},this.localNavTheme="",this.langCodeAPI="/bin/esri/getlanguagecode",this.isVerDocParam=!1,this.versionNum="",null!=this.locNavNode&&this.localNavArr.length>0){let t=document.querySelector("html")?document.querySelector("html").getAttribute("lang"):"en",e=[].slice.call(document.querySelectorAll("nav"));e.length>0&&this.findVersionAttr(e),"en"!==t&&2==t.length?this.find4CharLangCode(t):this.buildRequest(),this.locNavNode.hasAttribute("path")||this.enableMobileBtn()}}enableMobileBtn(){let t=document.querySelector(".nav-menu-title"),e=document.querySelector(".nav-submenu"),a=document.querySelector(".nav-menu-title");t&&e&&t.addEventListener("click",(t=>{"false"==e.getAttribute("aria-hidden")?(e.setAttribute("aria-hidden","true"),a.setAttribute("data-local-expanded","false")):(e.setAttribute("aria-hidden","false"),a.setAttribute("data-local-expanded","true"))}))}findVersionAttr(t){t.forEach((t=>{if(t.hasAttribute("version")){let e=t.getAttribute("version");null!==e&&e.length>0&&(this.isVerDocParam=!0,this.versionNum=e)}}))}updateNavTypeAttr(t){let e=this.locNavNode.getAttribute("path"),a=new RegExp("([/][a-z][^n][/])"),i=null!=a.exec(e)?a.exec(e):null;e&&null!=e&&null!=i&&(e=e.replace(i[0],t),this.locNavNode.setAttribute("path",e))}buildRequest(){let t="",e="/bin/esri/localnavigation",a=this.locNavNode.getAttribute("domain")?this.locNavNode.getAttribute("domain"):"";if("newNavigation"==this.locNavNode.getAttribute("navtype")){let i=this.locNavNode.getAttribute("path");"browserPath"==this.locNavNode.getAttribute("path")||(this.newNavObj=this.configureNewNav()),t=`${a}${e}?path=${i}`}else this.existingPath=this.removePathExt(this.locNavNode.getAttribute("path")),t=`${a}${e}?path=${this.existingPath}`;this.getJSONData(t)}find4CharLangCode(t){let e="",a=`${"http://localhost:4502"==window.location.protocol+"//"+window.location.host?"http://aem-dev.esri.com/":"https://www.esri.com"}${this.langCodeAPI}?lang=${t}`,i=new XMLHttpRequest;i.open("GET",a),i.responseType="text",i.send(),i.addEventListener("readystatechange",(()=>{4==i.readyState&&200==i.status&&(e=i.response?i.response:"en",this.updateNavTypeAttr("/"+e+"/"),this.buildRequest())}))}checkForColorTheme(){let t=!1;if([].slice.call(document.querySelectorAll("meta")).forEach((e=>{"color theme"===e.getAttribute("name")&&(this.localNavTheme=e.getAttribute("content"),""!=this.localNavTheme&&(t=!0))})),!t){let t="localColorTheme",e=document.head||document.getElementsByTagName("head")[0],a=document.getElementById(t)||document.createElement("style");a.id=t,a.hasChildNodes()||(a.innerHTML+=":root { --theme-color: #"+this.designThemeColor+"; } "),e.appendChild(a)}}configureNewNav(){let t={};return t.titletext=this.locNavNode.getAttribute("titletext"),t.titlelink=this.locNavNode.getAttribute("titlelink"),t.triallabel=this.locNavNode.getAttribute("triallabel"),t.triallink=this.locNavNode.getAttribute("triallink"),t}drawTertiaryElmt(t,e,a){return(t=[].slice.call(t)).forEach((t=>{let i=document.createElement("li");i.setAttribute("class","teritem");let r=document.createElement("a");r.setAttribute("href",t.pageLink),r.setAttribute("class","es-nav-terlink arrowStyleLocal"),r.setAttribute("aria-describedby",a),r.setAttribute("data-event","track-component"),r.setAttribute("data-component-name","Local Navigation"),r.setAttribute("data-component-link",`${a} - ${t.pageTitle}`),r.setAttribute("data-component-link-type","text"),r.innerHTML+=t.pageTitle,i.appendChild(r),e.appendChild(i)})),e}resetDropdowns(t){[].slice.call(t.querySelectorAll(".nav-subitem")).forEach((t=>{let e=t.childNodes[0],a=t.childNodes[1];null!=a&&(e.setAttribute("data-local-expanded","false"),a.setAttribute("aria-hidden","true"))}))}findParent(t){let e=t.split("/");return e.pop(),e.join("/")}drawSecondary(t){let e="",a=!1,i=document.createElement("li");i.setAttribute("class","nav-subitem"),i.setAttribute("id","item-"+t.pageTitle.replace(/ /g,"-"));let r=null==t.subnavItems||"true"===t.tertiary?document.createElement("a"):document.createElement("button");if(r.setAttribute("class","es-nav-sublink-local"),r.setAttribute("aria-controls","subitem-menu-"+t.pageTitle),r.setAttribute("id",t.pageTitle.replace(/ /g,"-")),r.setAttribute("data-event","track-component"),r.setAttribute("data-component-name","Local Navigation"),r.setAttribute("data-component-link",t.pageTitle),t.tertiary?r.setAttribute("data-component-link-type","button"):r.setAttribute("data-component-link-type","text"),this.currentURL&&(e=this.findParent(this.currentURL)),null!=t.subnavItems){if("false"==t.tertiary)r.setAttribute("aria-label",t.pageTitle+"-Click to open sub navigation items"),r.setAttribute("aria-current","true"),r.setAttribute("data-local-expanded",t.tertiary);else if("true"==t.tertiary){r.removeAttribute("aria-controls"),t.subnavItems.forEach((t=>{(this.removePathExt(t.redirect)===this.currentURL||this.removePathExt(t.redirect).replace(/^\/content\/esri-sites/,"")===this.currentURL||this.currentURL.includes(t.wildcard)&&t.wildcard.length>0)&&(a=!0)})),r.setAttribute("href",t.pageLink),r.setAttribute("data-tertiary","true"),r.setAttribute("aria-current","true")}}else r.removeAttribute("aria-controls"),r.setAttribute("href",t.pageLink);if(this.removePathExt(t.pageLink)===e||a?(r.setAttribute("attr-parent","true"),r.setAttribute("aria-current","true")):r.removeAttribute("attr-parent"),this.removePathExt(t.pageLink)===this.currentURL)r.setAttribute("aria-current","true"),"true"==t.tertiary&&r.setAttribute("data-tertiary","true");else if(null!=t.tertiary){let e=[].slice.call(t.subnavItems),i=!1;e.forEach((t=>{let e=this.removePathExt(t.pageLink).split("/"),n=e[e.length-1],l=e[e.length-2],s=this.currentURL,o=s.split("/"),d=o[o.length-1],c=o[o.length-2];d!==n&&d!==this.removePathExt(n)||c!==l||(i=!0),s.includes(l)&&r.setAttribute("aria-current","true"),r.removeAttribute("aria-current"),(i||a)&&r.setAttribute("aria-current","true")}))}else{r.removeAttribute("aria-current");let e=window.location.href;t.redirect===e&&r.setAttribute("aria-current","true")}if(r.innerHTML+=t.pageTitle,i.appendChild(r),i.addEventListener("click",(t=>{t.stopPropagation();let e=t.target,a=e.parentNode,i=e.parentNode.parentNode,r=a.childNodes[1];if(null!=r){t.preventDefault();let a=e.getAttribute("data-local-expanded"),n=e.getAttribute("id");"true"!=a&&this.resetDropdowns(i),"false"==e.getAttribute("data-local-expanded")?(e.setAttribute("is-active","true"),e.setAttribute("aria-label",n+"-Click to close sub navigation items"),e.setAttribute("data-local-expanded","true"),r.setAttribute("aria-hidden","false")):(e.setAttribute("is-active","false"),e.setAttribute("aria-label",n+"-Click to open sub navigation items"),e.setAttribute("data-local-expanded","false"),r.setAttribute("aria-hidden","true"))}})),document.addEventListener("click",(t=>{if(!i.contains(t.target)){let t=i.querySelector(".subitem-menu"),e=i.querySelector(".es-nav-sublink-local");t&&e&&(t.setAttribute("aria-hidden","true"),e.setAttribute("data-local-expanded","false"),e.setAttribute("is-active","false"),e.setAttribute("aria-label",e.getAttribute("id")+"-Click to open sub navigation items"))}})),t.subnavItems){let e=t.subnavItems;if("false"==t.tertiary){let a=document.createElement("div");a.setAttribute("class","subitem-menu"),a.setAttribute("aria-hidden","true"),a.setAttribute("role","region"),a.setAttribute("id","subitem-menu-"+t.pageTitle);let r=document.createElement("ul");r.setAttribute("class","terlist"),r.setAttribute("aria-labelledby",t.pageTitle);let n=this.drawTertiaryElmt(e,r,t.pageTitle);a.appendChild(n),i.appendChild(a)}}return i}wildCard(t){let e=!0,a=t.wildcard,i=a.split("/"),r=i.length-1;"/"!=a.charAt(0)&&(a="/"+t.wildcard,i=a.split("/"),r++);let n=this.currentURL.split("/"),l=n.length-1;for(let t=r;t>0;t--)n[l]!=i[t]&&(e=!1),l--;return e}drawrTertiaryDropDown(t){let e=document.createElement("li"),a=t.wildcard;0==t.wildcard.length&&(a=null);let i=!1,r=!1;i=this.removePathExt(t.redirect).includes(a),r=this.currentURL.includes(a),e.setAttribute("class","ternav-menu-item"),e.setAttribute("aria-current","false"),(this.removePathExt(t.pageLink)===this.currentURL||this.removePathExt(t.redirect)===this.currentURL&&i||this.currentURL.includes(a)||this.removePathExt(t.redirect).replace(/^\/content\/esri-sites/,"")===this.currentURL&&i)&&e.setAttribute("aria-current","true");let n=document.createElement("a");n.setAttribute("class","ternav-menu-item-link"),n.setAttribute("data-event","track-component"),n.setAttribute("data-component-name","Local Navigation"),n.setAttribute("data-component-link",`Subnav - ${t.pageTitle}`),n.setAttribute("data-component-link-type","text");let l=this.wildCard(t);return""!=t.redirect?(this.isVerDocParam&&(t.redirect=t.redirect.replace("latest",this.versionNum)),n.setAttribute("href",t.redirect),n.setAttribute("aria-current","true")):n.setAttribute("href",t.pageLink),l?(n.setAttribute("is-Active","true"),e.setAttribute("is-Active","true")):(n.removeAttribute("is-Active"),e.removeAttribute("is-Active")),n.innerHTML+=t.pageTitle,e.appendChild(n),e}drawMainTitle(t,e,a){let i=document.createElement("div");i.setAttribute("class",`nav-${e}`),i.setAttribute("id",`nav-${e}`);let r=document.createElement("a");return r.setAttribute("class",`nav-${a}`),r.setAttribute("data-event","track-component"),r.setAttribute("data-component-name","Local Navigation"),r.setAttribute("data-component-link-type","text"),r.setAttribute("data-component-link",t.title),"#"==t?(r.innerHTML+="",r.setAttribute("href",t)):t[e]?(r.innerHTML+=t[e],r.setAttribute("href",t[a]),r.setAttribute("data-component-link-type","button"),r.setAttribute("data-component-link",t[e])):null!=t.titletext&&(r.innerHTML+=t.titletext,r.setAttribute("href",t.titlelink)),r.addEventListener("keyup",(t=>{let e=t.target;this.resetDropdowns(e.parentNode.parentNode)})),i.appendChild(r),i}appendNavToDOM(t){console.info("%cJSON: ","style: colorx: blue;",t);let e=document.getElementById("second-nav"),a=!1,i="",r={},n={},l={},s={},o={},d={hasMain:!1,mainPos:0,colorTheme:"",hasPageTitle:!1};for(let e=0;e<t.length;e++)for(const[a,i]of Object.entries(t[e]))"main"==`${a}`&&(d.mainPos=e,d.hasMain=!0),"designTheme"==`${a}`&&(d.colorTheme=""==d.colorTheme?i:d.colorTheme,this.designThemeColor=d.colorTheme),"pageTitle"==`${a}`&&(d.hasPageTitle=!0);if(e&&null!=e){if(n=document.createElement("nav"),n.setAttribute("class","second-nav calcite-theme-dark calcite-mode-dark"),n.setAttribute("id","second-nav"),n.setAttribute("aria-label","Main"),n.setAttribute("data-local-expanded","false"),d.hasMain)if(null!=t[d.mainPos]){let e=t[d.mainPos].main,a=Object.keys(e);if(a.length>=2&&""==e.title&&""==e.titlelink){let t=this.drawMainTitle(this.newNavObj,"title","titlelink");n.appendChild(t)}else{let t=this.drawMainTitle(e,a[0],a[1]);n.appendChild(t)}}else if(null!=this.newNavObj.titletext&&null!=this.newNavObj.titlelink){let t=this.drawMainTitle(this.newNavObj,"title","titlelink");n.appendChild(t)}else{let t=this.drawMainTitle("#","title","titlelink");n.appendChild(t)}if(d.hasPageTitle){let e=document.createElement("div");e.setAttribute("class","nav-menu");let r=document.createElement("button");r.setAttribute("class","nav-menu-title"),r.setAttribute("href","#");let s=document.createElement("span");s.setAttribute("class","assistText"),s.innerHTML+="Menu";let d=document.createElement("div");d.setAttribute("class","nav-submenu"),o=document.createElement("ul"),o.setAttribute("class","nav-sublist"),o.setAttribute("aria-labelledby","nav-title"),this.checkForColorTheme(),(t=[].slice.call(t)).forEach((t=>{if(null!=t.pageTitle){let e=this.drawSecondary(t);if("true"==t.tertiary){let e=[].slice.call(t.subnavItems);this.removePathExt(t.pageLink)===this.currentURL&&(a=!0,l=t.subnavItems,i=t.pageTitle),e.forEach((e=>{let r=!!this.currentURL.includes(e.wildcard)&&this.currentURL.includes(e.wildcard);null!=e.wildcard&&e.wildcard.length>0&&r&&(a=!0,i=e.pageTitle,l=t.subnavItems),this.removePathExt(e.redirect)===this.currentURL||this.removePathExt(e.redirect).replace(/^\/content\/esri-sites/,"")===this.currentURL?(a=!0,i=e.pageTitle,l=t.subnavItems):this.removePathExt(e.pageLink)===this.currentURL&&(a=!0,i=t.pageTitle,l=t.subnavItems)}))}o.appendChild(e)}})),d.appendChild(o),r.appendChild(s),e.appendChild(r),e.appendChild(d),n.appendChild(e),r.addEventListener("click",(t=>{let a=e.parentNode;"false"==a.getAttribute("data-local-expanded")?(a.setAttribute("data-local-expanded","true"),d.setAttribute("aria-hidden","false")):(a.setAttribute("data-local-expanded","false"),d.setAttribute("aria-hidden","true"))})),document.addEventListener("click",(t=>{let a=d.contains(t.target),i=e.contains(t.target);if(!a&&!i&&d&&e){"false"==d.getAttribute("aria-hidden")&&d.setAttribute("aria-hidden","true"),e.parentNode.setAttribute("data-local-expanded","false")}}))}if(null!=t[0].main){let e=Object.keys(t[0].main);if(4==e.length&&""!=t[0].main.triallabel){let a=this.drawMainTitle(t[0].main,e[2],e[3]);r=this.drawMainTitle(t[0].main,e[2],e[3]),a.id=a.id+"-desktop",n.appendChild(a),o.appendChild(r)}}else if(null!=this.newNavObj.triallabel&&null!=this.newNavObj.triallink&&""!=this.newNavObj.triallabel){let t=this.drawMainTitle(this.newNavObj,"triallabel","triallink");t.id=t.id+"-desktop",r=this.drawMainTitle(this.newNavObj,"triallabel","triallink"),n.appendChild(t),o.appendChild(r)}}if(a){n.style.boxShadow="none",s=document.createElement("div"),s.setAttribute("class","third-nav-bar calcite-theme-dark calcite-mode-dark");let t=document.createElement("button");t.setAttribute("class","third-nav-title"),t.setAttribute("data-local-expanded","false"),t.setAttribute("href","#"),t.innerHTML+=i;let a=document.createElement("span");a.setAttribute("class","assistText"),a.innerHTML+="";let r=document.createElement("div");r.setAttribute("class","grid-container");let o=document.createElement("nav");o.setAttribute("class","third-nav-bar-container"),o.setAttribute("aria-hidden","false"),o.setAttribute("aria-label","Tertiary Navigation");let d=document.createElement("ul");d.setAttribute("class","third-nav-menu"),l=[].slice.call(l),l.forEach((t=>{if("false"==t.hideInTertiaryNav){let e=this.drawrTertiaryDropDown(t);d.appendChild(e)}})),t.addEventListener("click",(e=>{"false"==o.getAttribute("aria-hidden")?(o.setAttribute("aria-hidden","true"),t.setAttribute("data-local-expanded","false")):(o.setAttribute("aria-hidden","false"),t.setAttribute("data-local-expanded","true"))})),o.appendChild(d),r.appendChild(o),t.appendChild(a),s.appendChild(t),s.appendChild(r),e.insertAdjacentElement("afterEnd",s)}e.insertAdjacentElement("afterEnd",n),e.parentNode.removeChild(e)}getJSONData(t){let e={},a=new XMLHttpRequest;a.open("GET",t),a.responseType="text",a.send(),a.addEventListener("readystatechange",(()=>{if(4==a.readyState&&200==a.status)if(e=JSON.parse(a.responseText),e.length>0){this.appendNavToDOM(e),[].slice.call(document.querySelectorAll(".es-nav-terlink")).forEach((t=>{this.applyThemeArrow(t)})),this.addCaratStyles()}else console.warn("Local Nav Component: Invalid Navigation Path")})),a.onerror=function(){console.warn("Invalid URL:",url)}}getHostName(t){var e=t.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);return null!=e&&e.length>2&&"string"==typeof e[2]&&e[2].length>0?e[2]:null}removePathExt(t){if(null!==t){t.indexOf("html")>-1&&(t=t.slice(0,-5)),"/"!=t[0]&&(t=`/${t}`);let e=this.getHostName(t);if(null!=e){return t.replace(/^\/?https?:\/\/w*[.]?/,"").replace(e,"")}return t}}styleString(t,e,a,i){return`${e}${t}]:${a} ${i}`}addCaratStyles(){var t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.id="LocalNavStyles";var a="@media(min-width:976px) { .es-nav-sublink-local[aria-controls][data-local-expanded=",i="{ content: url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 14 25' width='10' height='25'%3E%3Cpath fill='%23"+this.designThemeColor+"' d='M 0 0 14 0 7 7' /%3E%3C/svg%3E\"); } }";e.innerHTML+=this.styleString("true",a,"after",i),e.innerHTML+=this.styleString("false",a,"hover::after",i),e.innerHTML+=this.styleString("true",a,"not(:hover)::after",i),e.innerHTML+=this.styleString("true",a,"hover::after",i),t.appendChild(e);var r=document.createElement("style");r.id="LocalNavMediaQueries",r.innerHTML+="@media(min-width:976px) { .es-nav-sublink-local[aria-controls]:after { content: url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 14 25' width='10' height='25'%3E%3Cpath fill='%23ffffff' d='M 0 0 14 0 7 7' /%3E%3C/svg%3E\"); } }",r.innerHTML+="@media(min-width:976px) { .es-nav-sublink-local[aria-controls=true][data-local-expanded]:hover::after { content: url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 14 25' width='10' height='25'%3E%3Cpath fill='%23"+this.designThemeColor+"' d='M 0 0 14 0 7 7' /%3E%3C/svg%3E\") !important; } }",r.innerHTML+="@media(min-width:976px) { .es-nav-sublink-local[aria-controls][data-local-expanded=true]:after { content: url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 14 25' width='10' height='25'%3E%3Cpath fill='%23"+this.designThemeColor+"' d='M 0 0 14 0 7 7' /%3E%3C/svg%3E\") !important; } }",r.innerHTML+="@media(min-width:976px) { .es-nav-sublink-local:not([data-local-expanded=true]):hover { box-shadow: inset 0 -3px 0 0 "+this.rgbBoxShadow+"; } }",r.innerHTML+="@media(min-width:976px) { .es-nav-sublink-local[aria-current=true]:not([data-local-expanded=true]) { box-shadow: inset 0 -3px 0 0 #"+this.designThemeColor+"; } }",r.innerHTML+=".ternav-menu-item[aria-current=true] a { box-shadow: inset 0 -3px 0 0 #"+this.designThemeColor+"; } ",r.innerHTML+=".ternav-menu-item:hover { box-shadow: inset 0 -3px 0 0 #"+this.designThemeColor+"80 !important; } ",r.innerHTML+="@media(min-width:860px) { .ternav-menu-item[aria-current=false]:hover { box-shadow: inset 0 -3px 0 0 #"+this.designThemeColor+"80 !important; } }",r.innerHTML+=".es-nav-terlink { background-image: linear-gradient(90deg, #"+this.designThemeColor+" 50%, #3f3f3f 0); } !important",r.innerHTML+="@media(min-width:976px) { button.es-nav-sublink-local[aria-current=true]:not([data-local-expanded=true]) { box-shadow: inset 0 -3px 0 0 "+this.rgbBoxShadow+"; } }",t.appendChild(r);var n=document.createElement("style");n.innerHTML+=":root {--secondarytheme-color: #"+this.designThemeColor+";--secondarycustom-theme-color: #"+this.designThemeColor+";--secondarytheme-color60: #"+this.designThemeColor+"80;}",t.appendChild(n)}hexToRgb(t){return t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,((t,e,a,i)=>"#"+e+e+a+a+i+i)).substring(1).match(/.{2}/g).map((t=>parseInt(t,16)))}dropdownArrow(t,e,a,i){var r=`${t}Local`,n=document.head||document.getElementsByTagName("head")[0],l=document.getElementById(r)||document.createElement("style");l.id=r;var s=`${t}Local`;return this.className+=" "+s,l.hasChildNodes()||(l.innerHTML+=" ."+s+":"+e+"{"+a+":"+i+"}"),n.appendChild(l),this}applyThemeArrow(){this.hexToRgb("#"+this.designThemeColor),this.rgbBoxShadow="rgba("+this.hexToRgb("#"+this.designThemeColor)+`,${this.shadowboxOpacity})`,this.dropdownArrow("arrowStyle","after","content","url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' width='16' height='16'%3E%3Cpath fill='%23"+this.designThemeColor+"' d='M8 14.3l5.3-5.3H0V8h13.3L8 2.7V1.3L15.2 8.5 8 15.7V14.3z' /%3E%3C/svg%3E\");")}}}"loading"!==document.readyState?t():document.addEventListener("DOMContentLoaded",(function(){t()}))})();