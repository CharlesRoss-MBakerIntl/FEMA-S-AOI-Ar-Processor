/*
var host = "http://marketplacedevext.arcgis.com",
    searchHost = "http://searchdev.esri.com",
*/



var searchHost = "//esearchapistg.esri.com",
	_searchCollection = "arcgis_pro_beta_col",
	_searchClient = "resourcesbeta",
	searchPageURL = "//prodev.arcgis.com",
	_agolHost = "//devext.arcgis.com",
	bannerCnt = '',
	trialUrl = "//learndev.arcgis.com",
	_esriWebappsCdnHost = "https://webapps-cdn.esri.com", 
	_esriAEMHost = "https://preview.esri.com";
if(window.location.hostname.match( /(prostg.arcgis.com)/)) {
	searchHost = "//esearchapistg.esri.com";
	searchPageURL = "//prostg.arcgis.com";
	_agolHost = "//qaext.arcgis.com";
	trialUrl = "https://learnstg.arcgis.com";
	bannerCnt = '\"ArcGIS Pro STAGING';
	document.documentElement.style.setProperty('--disp','block');
	document.documentElement.style.setProperty('--bgcolor', 'green');
	_esriWebappsCdnHost = "https://webapps-cdn.esri.com";
	_esriAEMHost = "https://www.esri.com";
} else if(window.location.hostname.match( /(pro.arcgis.com)/)) {
	searchHost = "//esearchapi.esri.com";
	searchPageURL = "//pro.arcgis.com";
	_agolHost = "//www.arcgis.com";
	trialUrl = "https://learn.arcgis.com";
	_esriWebappsCdnHost = "https://webapps-cdn.esri.com";
	_esriAEMHost = "https://www.esri.com";
}
else if(window.location.hostname.match( /(prodev.arcgis.com)/)) {
	bannerCnt = '\"ArcGIS Pro DEVELOPMENT';
	document.documentElement.style.setProperty('--disp','block');
	document.documentElement.style.setProperty('--bgcolor', 'red');
}

    //searchHost = "http://search.esri.com",
    sitecfg = {
	  	"debug" : false,

        "portalHostname" : _agolHost,
		"agolSignin" : 	_agolHost + "/home/signin.html",
		"agolProfile" :  "/home/user.html",
		"agolSignout" :  "/sharing/rest/oauth2/signout",
		"trialDownloadUrl": trialUrl + "/en/trial/",
		
		"searchUrl" : searchHost + "/search",
		"searchCollection" : _searchCollection,
	  	"searchClient" : _searchClient,
		"bannerCnt" : bannerCnt
	};
	
window.onload = function () {
	// Initialize all calcite.js patterns
	setTimeout(function(){ calcite.init()}, 50);
	
	/*setTimeout(function(){ 
			var pLang = document.getElementsByTagName("html")[0].getAttribute("lang").toLowerCase()
				var tDict = (window.localeJsonObj || {})[pLang];
				var proLangURL = appOverviewURL.replace("/content/esri-sites", "//www.esri.com").replace("/en-us/", "/"+esrilLangMapping[pLang]+"/").replace("/overview", "/resources")
				$(".breadcrumbs").prepend('<a class="crumb" href="'+proLangURL+'">'+tDict['nav_resources']+'</a>');
		}, 200);*/
};

var esrilLangMapping = {
				"en": "en-us",
				"de": "de-de",
				"es": "es-es",
				"fr": "fr-fr",
				"ja": "ja-jp",
				"zh-cn": "zh-cn",
				"ru": "ru-ru"
			}
var supportedLangList = {
    "default": ["en", "de", "es", "fr", "ja", "ru", "zh-cn"]
}

function insertElem (ele, cls="", content) {
	var pageLang = document.getElementsByTagName("html")[0].getAttribute("lang").toLowerCase()
	content = (esrilLangMapping[pageLang]) ? content.replace("/en-us/", "/"+esrilLangMapping[pageLang]+"/"):content
	
	var explodedPath = window.location.pathname.split("/");
	var versionSegment = "version='{0}'".format(explodedPath[3]);
	content = content.replace("<nav", "<nav "+ versionSegment);
	
	var elem = document.createElement(ele);
	elem.className = cls
	elem.innerHTML = content
	document.body.appendChild(elem);
}
function insertCss (cssUrl,addLink=false) {
	var css = document.createElement('link');
	css.rel = "stylesheet";
	//css.type = "text/css";
	css.href = cssUrl;
	if(addLink){
	 document.getElementsByTagName('head')[0].appendChild(css);
	}
}
insertCss(_esriAEMHost+"/etc.clientlibs/esri-sites/components/content/local-navigation/clientlibs.css", true)
;
